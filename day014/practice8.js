/* [JS DOM객체 실습]

1. 목표
- 사용자가 자신의 수입/지출 내역을 날짜, 항목, 금액으로 기록하고, 
  등록된 모든 내역을 한눈에 볼 수 있는 간단한 가계부 웹 페이지를 만듭니다.

2. 화면 구성
- 페이지는 사용자가 정보를 입력하는 **'등록 영역'**과 
  그 결과를 보여주는 **'목록 영역'**으로 명확히 구분되어야 합니다.
- 등록 영역:
    - 날짜 선택: 사용자가 내역의 날짜를 달력에서 직접 선택할 수 있어야 합니다.
    - 항목 입력: 사용자가 지출 또는 수입 항목의 내용을 텍스트로 자유롭게 입력할 수 있어야 합니다. (예: "점심 식사", "교통비")
    - 금액 입력: 사용자가 금액을 숫자로 입력할 수 있어야 합니다.
    - 등록 버튼: 위 세 가지 정보를 입력한 후, 목록에 추가하기 위한 "등록" 버튼이 있어야 합니다.
- 목록 영역:
    - 등록된 모든 가계부 내역을 보여주는 표가 있어야 합니다.
    - 표는 "날짜", "항목", "금액" 순서의 열로 구성되어야 합니다.

3. 핵심 기능
- 초기 데이터 표시:
    - 사용자가 페이지에 처음 방문했을 때, 가계부 사용법을 쉽게 이해할 수 있도록 
      두 개의 예시 내역이 목록 표에 기본적으로 표시되어 있어야 합니다.
- 내역 등록 기능:
    - 사용자가 '등록 영역'에 날짜, 항목, 금액을 모두 입력하고 "등록" 버튼을 클릭하면, 
      해당 내역이 '목록 영역' 표의 가장 아래쪽에 새로운 행으로 즉시 추가되어야 합니다.
- 금액 자동 서식:
    - '목록 영역'에 표시되는 모든 금액은 사용자의 가독성을 위해 천 단위마다 쉼표(,)가 자동으로 표시되어야 합니다. 
      (예: 4500이 입력되면 "4,500"으로 보여야 함)
    - 힌트] 변수명.toLocaleString()  :숫자를 세 자리마다 콤마(,)로 구분해주는 유용한 함수

*/
// [1] 메모리 설계 (ERD 설계)
  // 표 = 배열 // 행 = 레코드 = 객체1개 // 속성 = 표 제목 = 속성명 // 셀[한 칸] = 데이터/속성값
let 항목목록 = [{코드: 1 , "날짜": "2026-01-26", "항목": "점심 식사", "금액": 9000},
               {코드: 2 , "날짜": "2026-01-26", "항목": "교통비", "금액": 1500}
              ] // 화면에는 보이지 안힞만 내부적으로 각 객체/레코드 식별하느 식별코드를 정의하면 돟다. (중복 없는 데이터로 해야 함)

// [2] 기능 설계 (API 설계)
/*
(1) 화면에 보이는 이벤트/행위 , (2) 화면에 보이지 않는 이벤트/행위 찾기
1. 등록 처리 하는 기능 힐요.       = 등록 = create = C
      매개변수: ㄴ, 리턴값 ㄴ, 처리: 입력받은 3개 데이터를 객체로 만들어서 전역배열에 저장, 발동조건: 등록버튼 클릭했을때
2. 표에 출력하는 기능 필요.        = 출력 = read = R
      매개변수: ㄴ, 리턴값 ㄴ, 처리: 현재 전역배열에 저장된 모든 객체를 tr로 구성하여 html로 출력, 발동조건: 등록성공했을때

    - 함수 두 개로 만드신 이유: CRUD 따름. (관례적인 것 . 필수x.)
    참고1: 함수/기능은 나눠서 따로 만드는게 좋다 = 유지보수. 나누는 기준CRUD(등록출력수정삭제 한번에x. 분리해서.) C등록 R출력 U수정 D삭제
    참고2: 배열에 전역변수를 사용한 이유는 서로 다른 함수들 간의 공유(같은 배열) 사용하기 위해. */

// [3] 구현
// 3-1] 등록함수                            // 🚨오류날 때! 한 줄 한 줄 console.log().
function 등록함수( ){                     //  console.log( "등록함수()" ); 함수 실행 문제. 함수를 호출했던 위치 문제.
  // 1. 입력받은 값 가져오기
    // 1) document.querySelector() 이용하여 dom 가져오기
      let dateDom = document.querySelector(".날짜입력")
       // console.log(dateDom);  하나하나 출력해보기. 포폴엔 넣으면 안 됨
      let date = dateDom.value;
      let contentDom = document.querySelector(".항목입력")
      let content = contentDom.value;
      let moneyDom = document.querySelector(".금액입력")
      let money = moneyDom.value;

    // 2) .value() 이용하여 dom의 value 값 가져오기
        // 식별코드는 자동부여, 마지막 객체 내 코드의 + 1
        let code = 항목목록[항목목록.length-1].코드 + 1; // 항목목록.length -1 : 마지막인덱스.    항목목록[항목목록.length-1].코드  == 2 (코드:2)
      let obj = {코드: code , "날짜": date, "항목": content, "금액": money} ;

  // 2. 입력받은 값들을 객체 구성
    // { 속성명: 값 , 속성명: 값 }

  // 3. (전역) 배열에 저장
    // 배열변수명.push()
  항목목록.push( obj );   // 배열변수명.push( )
  alert("등록성공");      // *추가코드1) 안내문구
  contentDom.value = ""; // *추가코드2) 입력받은값 초기화
  // 4. 즉시 테이블에 반영
  출력함수();
}

// 3-2] 출력함수
function 출력함수( ){ 
  // 1. 어디에: tbody
  let 테이블본문 = document.querySelector(".테이블본문");
  // 2. 무엇을: 입력받은 배열 내 객체들을 <tr>구성으로 출력
  let html = ``;
  for( let index = 0 ; index <= 항목목록.length-1 ; index++){
    let obj = 항목목록[index];
    html += `<tr>
                  <td>${obj.날짜}</td>
                  <td>${obj.항목}</td>
                  <td>${Number(obj.금액).toLocaleString()} 원</td>                
                  <td><button>삭제</button></td>
              </tr>`
  }
  // 3. 출력: 구성된 html 출력함
  테이블본문.innerHTML = html;
}

// [4] 테스트


